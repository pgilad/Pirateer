var rawMovieList=[],movieListByName=[],getRating=function(){if(movieListByName.length){var a=chrome.runtime.connect({name:"getRating"});a.postMessage({type:"list",list:movieListByName}),a.onMessage.addListener(function(a){"ratingResponse"===a.type&&"undefined"!=typeof a.index&&(rawMovieList[a.index].querySelector("td.imdb").innerText=a.rating)})}else console.log("[Pirateer] - No Videos in current page")},appendChildToParent=function(a,b,c){b.style.textAlign="center",b.appendChild(c),a.appendChild(b)},applyHeader=function(){var a=document.querySelector("tr.header"),b=document.createTextNode("IMDB Rating"),c=document.createElement("th");return appendChildToParent(a,c,b),!0},applyTD=function(a,b,c){rawMovieList.push(a),c&&movieListByName.push(c);var d=document.createTextNode(""),e=document.createElement("td");e.className="imdb",appendChildToParent(a,e,d)},isCategoryVideo=function(a){return a&&a[0]&&a[0].innerText&&"Video"===a[0].innerText};!function(){for(var a,b,c,d=!1,e=null,f=document.querySelectorAll("tbody tr"),g=0;g<f.length;++g)a=f[g].querySelectorAll(".vertTh a"),b=isCategoryVideo(a),e=b?f[g].querySelector("div.detName").innerText:null,c=e?{name:e,index:g}:null,!d&&b&&(d=!0),applyTD(f[g],b,c);d&&applyHeader(),getRating()}();